<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scam Detector - JobShield AI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #001f3f; /* Navy Blue */
      --secondary-color: #ffffff; /* White */
      --accent-color: #0074D9; /* Bright Blue */
      --warning-color: #FF4136; /* Red for warnings */
      --success-color: #2ECC40; /* Green for success */
      --dark-bg: #0a192f; /* Dark blue background */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--dark-bg) 0%, var(--secondary-color) 100%);
      color: var(--secondary-color);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styles */
    header {
      background-color: rgba(0, 31, 63, 0.9);
      padding: 1.5rem;
      text-align: center;
      position: relative;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.2);
      border-bottom: 3px solid var(--accent-color);
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .logo i {
      color: var(--accent-color);
      font-size: 1.8rem;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 1rem;
    }

    nav a {
      color: var(--secondary-color);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    nav a:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    nav a.active {
      background-color: var(--accent-color);
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 3rem 1rem;
      margin-bottom: 2rem;
    }

    .hero h1 {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero p {
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto;
      color: #ccc;
    }

    /* Scanner Section */
    .scanner-container {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .scanner-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 1.5rem;
    }

    .scanner-header i {
      color: var(--accent-color);
      font-size: 2rem;
    }

    .input-methods {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .method-btn {
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 8px;
      color: var(--secondary-color);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .method-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .method-btn.active {
      background: var(--accent-color);
    }

    .text-input-area {
      margin-bottom: 20px;
    }

    .text-input-area textarea {
      width: 100%;
      min-height: 200px;
      padding: 1.2rem;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--secondary-color);
      font-size: 1rem;
      resize: vertical;
    }

    .file-upload {
      border: 2px dashed rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      padding: 2.5rem;
      text-align: center;
      cursor: pointer;
      margin-bottom: 20px;
      transition: all 0.3s;
      display: none;
    }

    .file-upload:hover {
      border-color: var(--accent-color);
      background: rgba(0, 116, 217, 0.05);
    }

    .file-upload i {
      font-size: 3rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    .analyze-btn {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 1.2rem 2.5rem;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
      display: block;
      margin: 0 auto;
      font-weight: 600;
    }

    .analyze-btn:hover {
      background: #0063b3;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 116, 217, 0.3);
    }

    .analyze-btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Results Section */
    .results-container {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: none;
    }

    .results-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }

    .risk-meter {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 2rem;
    }

    .risk-level {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .risk-low {
      color: var(--success-color);
    }

    .risk-medium {
      color: orange;
    }

    .risk-high {
      color: var(--warning-color);
    }

    .meter {
      height: 10px;
      flex-grow: 1;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      overflow: hidden;
    }

    .meter-fill {
      height: 100%;
      border-radius: 5px;
      transition: width 1s ease-in-out;
    }

    .red-flags {
      margin-bottom: 2rem;
    }

    .red-flags h3 {
      margin-bottom: 1rem;
      color: var(--warning-color);
    }

    .flag-item {
      background: rgba(255, 65, 54, 0.1);
      border-left: 4px solid var(--warning-color);
      padding: 1rem;
      margin-bottom: 0.8rem;
      border-radius: 4px;
    }

    .suggestions {
      margin-bottom: 2rem;
    }

    .suggestions h3 {
      margin-bottom: 1rem;
      color: var(--success-color);
    }

    .suggestion-item {
      background: rgba(46, 204, 64, 0.1);
      border-left: 4px solid var(--success-color);
      padding: 1rem;
      margin-bottom: 0.8rem;
      border-radius: 4px;
    }

    /* Examples Section */
    .examples {
      margin-bottom: 3rem;
    }

    .examples h2 {
      text-align: center;
      margin-bottom: 2rem;
    }

    .example-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .example-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      transition: transform 0.3s;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .example-card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.1);
    }

    .example-card h3 {
      margin-bottom: 1rem;
      color: var(--accent-color);
    }

    /* Footer */
    footer {
      background-color: rgba(0, 31, 63, 0.9);
      text-align: center;
      padding: 2.5rem;
      margin-top: 3rem;
      border-top: 3px solid var(--accent-color);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 1.5rem;
    }

    .footer-links a {
      color: var(--secondary-color);
      text-decoration: none;
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .input-methods {
        flex-direction: column;
      }
      
      nav {
        flex-wrap: wrap;
      }
      
      .hero h1 {
        font-size: 2.2rem;
      }
      
      .example-cards {
        grid-template-columns: 1fr;
      }
    }

    /* Animations */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    /* AI Assistant Floating Button */
    .ai-assistant-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      z-index: 100;
      transition: all 0.3s;
    }

    .ai-assistant-btn:hover {
      transform: scale(1.1);
    }

    .ai-assistant-btn i {
      color: white;
      font-size: 1.5rem;
    }

    .ai-assistant-btn.listening {
      animation: pulse 1.5s infinite;
      background: linear-gradient(135deg, #FF4136 0%, #FF6B6B 100%);
    }

    /* AI Assistant Chat Interface */
    .ai-assistant-chat {
      position: fixed;
      bottom: 100px;
      right: 30px;
      width: 350px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      transform: translateY(20px);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      z-index: 101;
    }

    .ai-assistant-chat.active {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    .chat-header {
      background-color: var(--primary-color);
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header h3 {
      margin: 0;
      font-size: 1rem;
    }

    .close-chat {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 1.2rem;
    }

    .chat-messages {
      height: 300px;
      overflow-y: auto;
      padding: 1rem;
    }

    .message {
      margin-bottom: 1rem;
      padding: 0.8rem 1rem;
      border-radius: 18px;
      max-width: 80%;
      font-size: 0.9rem;
    }

    .ai-message {
      background-color: #f0f8ff;
      margin-right: auto;
      border-bottom-left-radius: 4px;
      color: #333;
    }

    .user-message {
      background-color: var(--primary-color);
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 4px;
    }

    .chat-input {
      display: flex;
      padding: 1rem;
      border-top: 1px solid #eee;
    }

    .chat-input input {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-right: 10px;
    }

    .send-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0 1rem;
      cursor: pointer;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 65, 54, 0.7); }
      70% { box-shadow: 0 0 0 15px rgba(255, 65, 54, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 65, 54, 0); }
    }

    @media (max-width: 768px) {
      .features {
        grid-template-columns: 1fr;
      }
      
      nav {
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      
      .ai-assistant-chat {
        width: 90%;
        right: 5%;
      }
    }

    /* Loading Spinner */
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <i class="fas fa-shield-alt"></i>
      <h1>JobShield AI</h1>
    </div>
    <p>Your smart protection in the job market, powered by Spark ðŸ¤–</p>
    <nav>
      <a href="index.html">Home</a>
      <a href="CVbuilder.html">CV Builder</a>
      <a href="jobhunt.html">Job Hunt</a>
      <a href="Scamdetector.html" class="active">Scam Detector</a>
      <a href="feedback.html">Feedback</a>
    </nav>
  </header>

  <div class="container">
    <section class="hero">
      <h1>AI-Powered Job Scam Detector</h1>
      <p>Protect yourself from fraudulent job offers, phishing attempts, and recruitment scams with our advanced AI analysis</p>
    </section>

    <section class="scanner-container">
      <div class="scanner-header">
        <i class="fas fa-search"></i>
        <h2>Analyze Suspicious Content</h2>
      </div>
      
      <div class="input-methods">
        <button class="method-btn active" id="textMethod"><i class="fas fa-font"></i> Paste Text</button>
        <button class="method-btn" id="fileMethod"><i class="fas fa-file-alt"></i> Upload Document</button>
        <button class="method-btn" id="emailMethod"><i class="fas fa-envelope"></i> Email Forwarding</button>
      </div>
      
      <div class="text-input-area" id="textInputArea">
        <textarea id="messageInput" placeholder="Paste the suspicious job offer, email, or message here..."></textarea>
      </div>
      
      <div class="file-upload" id="fileUploadArea">
        <i class="fas fa-cloud-upload-alt"></i>
        <p>Or drag & drop your file here (PDF, DOCX, TXT)</p>
        <p><small>We never store your personal documents</small></p>
      </div>
      
      <button class="analyze-btn" id="analyzeBtn"><i class="fas fa-shield-alt"></i> Analyze for Scams</button>
    </section>

    <section class="results-container" id="results">
      <div class="results-header">
        <h2>Analysis Results</h2>
        <div class="risk-level" id="riskLevel">High Risk</div>
      </div>
      
      <div class="risk-meter">
        <span>Low</span>
        <div class="meter">
          <div class="meter-fill" id="meterFill"></div>
        </div>
        <span>High</span>
      </div>
      
      <div class="red-flags">
        <h3><i class="fas fa-flag"></i> Red Flags Detected</h3>
        <div id="redFlagsList"></div>
      </div>
      
      <div class="suggestions">
        <h3><i class="fas fa-lightbulb"></i> Recommended Actions</h3>
        <div id="suggestionsList"></div>
      </div>
    </section>

    <section class="examples">
      <h2>Common Job Scam Examples</h2>
      <div class="example-cards">
        <div class="example-card" id="example1">
          <h3>Fake Check Scams</h3>
          <p>You receive an unexpected check with instructions to deposit it and wire portion of funds elsewhere.</p>
        </div>
        <div class="example-card" id="example2">
          <h3>Phishing Emails</h3>
          <p>Emails pretending to be from reputable companies asking for personal information.</p>
        </div>
        <div class="example-card" id="example3">
          <h3>Pyramid Schemes</h3>
          <p>Job offers focused on recruiting others rather than selling actual products or services.</p>
        </div>
      </div>
    </section>
  </div>

  <footer>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <a href="#">Contact Us</a>
      <a href="#">About</a>
    </div>
    <p>Â© 2025 JobShield AI. All rights reserved.</p>
    <p><small>Spark AI is designed to assist but cannot guarantee complete protection against all scams. Always use caution.</small></p>
  </footer>
  
  <!-- AI Assistant Floating Button -->
  <div class="ai-assistant-btn" id="aiAssistantBtn">
    <i class="fas fa-robot"></i>
  </div>

  <!-- AI Assistant Chat Interface -->
  <div class="ai-assistant-chat" id="aiAssistantChat">
    <div class="chat-header">
      <h3>Spark AI Assistant</h3>
      <button class="close-chat" id="closeChat">&times;</button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message ai-message">
        Hi there! I'm Spark AI your JobShield assistant. How can I help you today? You can ask me about:
        <ul>
          <li>Job scams</li>
          <li>Resume tips</li>
          <li>Job search advice</li>
        </ul>
        Just click the mic button to speak!
      </div>
    </div>
    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="Type your message...">
      <button class="send-btn" id="sendMessage"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <script>
    // Scam Detection Logic
    const detectionPatterns = {
      highRisk: [
        {pattern: "verify your account", score: 6, reason: "Request for account verification"},
        {pattern: "otp", score: 6, reason: "Request for one-time password"},
        {pattern: "one.time.password", score: 6, reason: "Request for one-time password"},
        {pattern: "bank details", score: 6, reason: "Request for banking information"},
        {pattern: "card number", score: 6, reason: "Request for credit card information"},
        {pattern: "cvv", score: 6, reason: "Request for CVV security code"},
        {pattern: "password", score: 6, reason: "Request for password"},
        {pattern: "pin", score: 6, reason: "Request for PIN"},
        {pattern: "click here", score: 6, reason: "Suspicious link request"},
        {pattern: "urgent", score: 6, reason: "Creates artificial urgency"},
        {pattern: "account suspended", score: 6, reason: "Threat of account suspension"},
        {pattern: "confirm now", score: 6, reason: "Pressure to act immediately"},
        {pattern: "limited time", score: 6, reason: "Creates false scarcity"},
        {pattern: "verify now", score: 6, reason: "Pressure to verify immediately"},
        {pattern: "transfer", score: 6, reason: "Request for money transfer"},
        {pattern: "gift card", score: 6, reason: "Request for gift card payment"},
        {pattern: "send money", score: 6, reason: "Request to send money"},
        {pattern: "secure.login", score: 6, reason: "Suspicious login request"},
        {pattern: "login now", score: 6, reason: "Pressure to login immediately"},
        {pattern: "refund", score: 6, reason: "Promises of refunds"},
        {pattern: "pay now", score: 6, reason: "Pressure to pay immediately"},
        {pattern: "payment required", score: 6, reason: "Request for payment"},
        {pattern: "wire transfer", score: 6, reason: "Request for wire transfer"},
        {pattern: "reactivate", score: 6, reason: "Request to reactivate account"},
        {pattern: "update info", score: 6, reason: "Request to update personal information"},
        {pattern: "upfront payment", score: 6, reason: "Request for upfront payment"},
        {pattern: "processing fee", score: 6, reason: "Request for processing fee"}
      ],
      mediumRisk: [
        {pattern: "offer expires", score: 3, reason: "Creates false urgency"},
        {pattern: "selected winner", score: 3, reason: "Claims you've been selected"},
        {pattern: "lucky draw", score: 3, reason: "Mentions lucky draw or lottery"},
        {pattern: "claim your prize", score: 3, reason: "Claims you've won a prize"},
        {pattern: "investment opportunity", score: 3, reason: "Promises investment returns"},
        {pattern: "make money fast", score: 3, reason: "Promises quick earnings"},
        {pattern: "lottery", score: 3, reason: "Mentions lottery winnings"},
        {pattern: "package held", score: 3, reason: "Claims package is held"},
        {pattern: "customs fee", score: 3, reason: "Mentions customs fees"},
        {pattern: "work from home", score: 3, reason: "Work from home opportunity"},
        {pattern: "no experience", score: 3, reason: "No experience required"},
        {pattern: "high salary", score: 3, reason: "Promises unusually high salary"}
      ],
      lowRisk: [
        {pattern: "interview", score: -1, reason: "Mentions interview process"},
        {pattern: "resume", score: -1, reason: "Requests resume/CV"},
        {pattern: "experience", score: -1, reason: "Mentions required experience"},
        {pattern: "qualifications", score: -1, reason: "Mentions qualifications"}
      ]
    };

    // UI Elements
    const analyzeBtn = document.getElementById('analyzeBtn');
    const messageInput = document.getElementById('messageInput');
    const resultsContainer = document.getElementById('results');
    const riskLevel = document.getElementById('riskLevel');
    const meterFill = document.getElementById('meterFill');
    const redFlagsList = document.getElementById('redFlagsList');
    const suggestionsList = document.getElementById('suggestionsList');
    const textMethod = document.getElementById('textMethod');
    const fileMethod = document.getElementById('fileMethod');
    const emailMethod = document.getElementById('emailMethod');
    const textInputArea = document.getElementById('textInputArea');
    const fileUploadArea = document.getElementById('fileUploadArea');

    // Input Method Toggle
    textMethod.addEventListener('click', function() {
      textMethod.classList.add('active');
      fileMethod.classList.remove('active');
      emailMethod.classList.remove('active');
      textInputArea.style.display = 'block';
      fileUploadArea.style.display = 'none';
    });

    fileMethod.addEventListener('click', function() {
      fileMethod.classList.add('active');
      textMethod.classList.remove('active');
      emailMethod.classList.remove('active');
      textInputArea.style.display = 'none';
      fileUploadArea.style.display = 'block';
    });

    emailMethod.addEventListener('click', function() {
      emailMethod.classList.add('active');
      textMethod.classList.remove('active');
      fileMethod.classList.remove('active');
      textInputArea.style.display = 'none';
      fileUploadArea.style.display = 'none';
      alert('Email forwarding feature coming soon!');
    });

    // Example Cards Click Handler
    document.getElementById('example1').addEventListener('click', function() {
      messageInput.value = "Congratulations! You've been selected for a work-from-home position paying $5000/month. To get started, we need you to deposit this check and wire $2000 for training materials. This offer expires in 24 hours. Click here to verify: bit.ly/secure-job-offer";
      analyzeMessage();
    });

    document.getElementById('example2').addEventListener('click', function() {
      messageInput.value = "URGENT: Your account has been flagged for suspicious activity. To avoid suspension, verify your identity immediately by providing your social security number and bank details. Click the link below to secure your account: http://fake-amazon-security.com/verify";
      analyzeMessage();
    });

    document.getElementById('example3').addEventListener('click', function() {
      messageInput.value = "Hi! We're looking for motivated individuals to join our team. No experience needed! Earn $10,000/month by recruiting others. Limited spots available. Send $500 for the starter kit to begin your journey to financial freedom!";
      analyzeMessage();
    });

    // Analyze Button Handler
    analyzeBtn.addEventListener('click', analyzeMessage);

    function analyzeMessage() {
      const message = messageInput.value.trim();
      
      if (!message) {
        alert('Please enter a message to analyze.');
        return;
      }
      
      // Show loading state
      analyzeBtn.disabled = true;
      analyzeBtn.innerHTML = '<span class="spinner"></span> Analyzing...';
      
      // Simulate analysis delay for better UX
      setTimeout(() => {
        const result = performScamAnalysis(message);
        displayResults(result);
        
        // Reset button
        analyzeBtn.disabled = false;
        analyzeBtn.innerHTML = '<i class="fas fa-shield-alt"></i> Analyze for Scams';
      }, 1500);
    }

    function performScamAnalysis(message) {
      const lowerMsg = message.toLowerCase();
      let score = 0;
      const flags = [];
      const suggestions = [];
      
      // Check for high risk patterns
      detectionPatterns.highRisk.forEach(item => {
        if(lowerMsg.includes(item.pattern)) {
          score += item.score;
          flags.push(item.reason);
        }
      });
      
      // Check for medium risk patterns
      detectionPatterns.mediumRisk.forEach(item => {
        if(lowerMsg.includes(item.pattern)) {
          score += item.score;
          flags.push(item.reason);
        }
      });
      
      // Check for low risk patterns (reduce suspicion)
      detectionPatterns.lowRisk.forEach(item => {
        if(lowerMsg.includes(item.pattern)) {
          score = Math.max(0, score + item.score);
        }
      });
      
      // Check for URLs
      const urls = /https?:\/\/[^\s]+/g;
      if(urls.test(lowerMsg)) {
        score += 5;
        flags.push("Contains suspicious URL");
      }
      
      // Check for short URLs
      const shortUrls = /bit\.ly|tinyurl|goo\.gl|t\.co|short\.link/;
      if(shortUrls.test(lowerMsg)) {
        score += 5;
        flags.push("Contains shortened URL (common in phishing)");
      }
      
      // Check for urgency
      const urgency = ["2 hours", "today", "immediately", "within 24", "urgent", "limited time"];
      urgency.forEach(w => {
        if(lowerMsg.includes(w)) {
          score += 3;
          flags.push("Creates artificial urgency");
        }
      });
      
      // Check for all caps
      if(message.match(/[A-Z]{4,}/)) {
        score += 2;
        flags.push("Uses excessive capitalization");
      }
      
      // Check for excessive punctuation
      if(message.match(/!/g)?.length >= 2) {
        score += 2;
        flags.push("Uses excessive exclamation marks");
      }
      
      // Calculate risk percentage
      const riskPercent = Math.min(100, Math.max(0, score * 3));
      
      // Generate suggestions based on risk level
      if (riskPercent >= 70) {
        suggestions.push("Do not send any money or provide banking information");
        suggestions.push("Research the company independently using official sources");
        suggestions.push("Contact the company directly using verified contact information");
        suggestions.push("Report this scam attempt to relevant authorities");
      } else if (riskPercent >= 40) {
        suggestions.push("Verify the company's legitimacy through official channels");
        suggestions.push("Be cautious about sharing personal information");
        suggestions.push("Look for official contact information, not what's provided in the message");
        suggestions.push("Ask for more details about the job position and requirements");
      } else {
        suggestions.push("This appears to be a legitimate message, but always verify job offers");
        suggestions.push("Research the company before proceeding");
        suggestions.push("Ensure communication is through official channels");
      }
      
      // Determine risk level
      let level, levelText;
      if(riskPercent >= 70) { 
        level = "risk-high"; 
        levelText = "High Risk"; 
      } else if(riskPercent >= 40) { 
        level = "risk-medium"; 
        levelText = "Medium Risk"; 
      } else { 
        level = "risk-low"; 
        levelText = "Low Risk"; 
      }
      
      return {
        riskPercent,
        level,
        levelText,
        flags,
        suggestions
      };
    }

    function displayResults(result) {
      // Update risk level
      riskLevel.textContent = result.levelText;
      riskLevel.className = 'risk-level ' + result.level;
      
      // Update meter
      meterFill.style.width = result.riskPercent + '%';
      meterFill.style.backgroundColor = 
        result.level === 'risk-high' ? 'var(--warning-color)' : 
        result.level === 'risk-medium' ? 'orange' : 'var(--success-color)';
      
      // Update red flags
      redFlagsList.innerHTML = '';
      if (result.flags.length > 0) {
        result.flags.forEach(flag => {
          const flagItem = document.createElement('div');
          flagItem.className = 'flag-item';
          flagItem.innerHTML = `<strong>${flag}</strong>`;
          redFlagsList.appendChild(flagItem);
        });
      } else {
        redFlagsList.innerHTML = '<div class="flag-item">No specific red flags detected.</div>';
      }
      
      // Update suggestions
      suggestionsList.innerHTML = '';
      result.suggestions.forEach(suggestion => {
        const suggestionItem = document.createElement('div');
        suggestionItem.className = 'suggestion-item';
        suggestionItem.textContent = suggestion;
        suggestionsList.appendChild(suggestionItem);
      });
      
      // Show results
      resultsContainer.style.display = 'block';
      resultsContainer.scrollIntoView({ behavior: 'smooth' });
    }

    // AI Assistant Toggle
    const aiAssistantBtn = document.getElementById('aiAssistantBtn');
    const aiAssistantChat = document.getElementById('aiAssistantChat');
    const closeChat = document.getElementById('closeChat');

    aiAssistantBtn.addEventListener('click', function() {
      aiAssistantChat.classList.toggle('active');
    });

    closeChat.addEventListener('click', function() {
      aiAssistantChat.classList.remove('active');
    });

    // Voice Recognition
    let recognition;
    try {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.lang = 'en-US';

      recognition.onstart = function() {
        aiAssistantBtn.classList.add('listening');
      };

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        addMessage(transcript, 'user');
        respondToMessage(transcript);
        aiAssistantBtn.classList.remove('listening');
      };

      recognition.onerror = function(event) {
        console.error('Speech recognition error', event.error);
        aiAssistantBtn.classList.remove('listening');
        addMessage("Sorry, I didn't catch that. Please try again.", 'ai');
      };

      aiAssistantBtn.addEventListener('click', function() {
        if (aiAssistantBtn.classList.contains('listening')) {
          recognition.stop();
          aiAssistantBtn.classList.remove('listening');
        } else if (aiAssistantChat.classList.contains('active')) {
          recognition.start();
        }
      });
    } catch(e) {
      console.log('Speech recognition not supported');
    }

    // Chat functionality
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const sendMessageBtn = document.getElementById('sendMessage');

    function addMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', sender + '-message');
      messageDiv.textContent = text;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function respondToMessage(message) {
      // Simple response logic
      let response = "I can help with that. ";
      
      if (message.toLowerCase().includes('scam') || message.toLowerCase().includes('fake')) {
        response += "You can paste suspicious job offers in our Scam Detector tool for analysis. Would you like me to open it for you?";
      } else if (message.toLowerCase().includes('resume') || message.toLowerCase().includes('cv')) {
        response += "Our CV Builder can help you create a professional resume. Would you like to try it now?";
      } else if (message.toLowerCase().includes('job') || message.toLowerCase().includes('opportunity')) {
        response += "I can help you search for jobs matching your skills. What type of work are you looking for?";
      } else {
        response += "For more specific help, you can visit our website sections using the menu above.";
      }
      
      setTimeout(() => {
        addMessage(response, 'ai');
      }, 1000);
    }

    sendMessageBtn.addEventListener('click', function() {
      if (chatInput.value.trim() !== '') {
        addMessage(chatInput.value, 'user');
        respondToMessage(chatInput.value);
        chatInput.value = '';
      }
    });

    chatInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && chatInput.value.trim() !== '') {
        addMessage(chatInput.value, 'user');
        respondToMessage(chatInput.value);
        chatInput.value = '';
      }
    });
  </script>
</body>
</html>
